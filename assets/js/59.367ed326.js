(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{590:function(t,s,a){"use strict";a.r(s);var n=a(48),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"配置踩坑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置踩坑"}},[t._v("#")]),t._v(" 配置踩坑")]),t._v(" "),a("ul",[a("li",[t._v("mongoDB安装出现的问题以及解决办法")]),t._v(" "),a("li",[t._v("记录一些在配置云服务器的事项")])]),t._v(" "),a("h2",{attrs:{id:"windows-mongodb安装出现的问题以及解决办法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows-mongodb安装出现的问题以及解决办法"}},[t._v("#")]),t._v(" windows mongoDB安装出现的问题以及解决办法")]),t._v(" "),a("h4",{attrs:{id:"安装包名是86x-但是实际上是64位"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装包名是86x-但是实际上是64位"}},[t._v("#")]),t._v(" 安装包名是86x 但是实际上是64位")]),t._v(" "),a("ul",[a("li",[t._v("安装的MongoDB版本是4.0.4，操作系统是Windows8.1 64位")])]),t._v(" "),a("h5",{attrs:{id:"安装选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装选项"}},[t._v("#")]),t._v(" 安装选项")]),t._v(" "),a("ul",[a("li",[t._v("倒数第二步，勾选Install MongoDB Compass可能会导致安装不成功")])]),t._v(" "),a("h5",{attrs:{id:"错误"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#错误"}},[t._v("#")]),t._v(" 错误")]),t._v(" "),a("ul",[a("li",[t._v("在moongoDB官网下载二进制文件，选择默认安装目录后，进行安装，会提示"),a("code",[t._v("Service 'MongoDB Server' failed to start. Verify that you have sufficient privileges to start system services.")]),t._v("这个先不管")]),t._v(" "),a("li",[t._v("安装完成，在"),a("code",[t._v("C:\\Program Files\\MongoDB\\Server\\4.0\\bin")]),t._v(" 文件夹下打开命令行(shift+右键)，运行mongod命令发现会有错误弹窗，提示信息 "),a("code",[t._v("api-ms-win-crt-runtime-l1-1-0.dll")]),t._v("文件缺失")]),t._v(" "),a("li",[t._v("此时需要安装 "),a("code",[t._v("Visual C++ Redistributable for Visual Studio 2015")]),t._v(" 这个软件，"),a("a",{attrs:{href:"https://www.microsoft.com/zh-cn/download/details.aspx?id=48145",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载地址"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("安装完成后再次运行mongod命令，如果仍然出错，需要先把"),a("code",[t._v("C:\\Windows\\SysWOW64下api-ms-win-crt-runtime-l1-1-0.dll")]),t._v("文件先删除（可以备份）")]),t._v(" "),a("li",[t._v("然后将 "),a("code",[t._v("Visual C++ Redistributable for Visual Studio 2015")]),t._v(" 先卸载再次安装")]),t._v(" "),a("li",[t._v("再次运行 mongod 命令，发现生效，无报错，此时需要在 C盘 根目录下新建 data 文件夹，data文件夹下再新建 db 文件夹（否则直接运行mongod命令无法连接数据库）")]),t._v(" "),a("li",[t._v("然后在命令行运行"),a("code",[t._v("C:\\mongodb\\bin\\mongod --dbpath c:\\data\\db")]),t._v(" 修改默认的存储目录")]),t._v(" "),a("li",[t._v("至此安装运行成功")]),t._v(" "),a("li",[t._v("推测前面产生错误的原因是电脑自带的 Visual C++ Redistributable 版本是 2012，可能版本太老需要安装新版本 2015")])]),t._v(" "),a("h5",{attrs:{id:"配置环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置环境变量"}},[t._v("#")]),t._v(" 配置环境变量")]),t._v(" "),a("ul",[a("li",[t._v("配置环境变量的作用是，执行monogo命令时，不必每次都找到安装目录执行，可以在任意文件夹执行")]),t._v(" "),a("li",[t._v("把mongoDB安装包bin文件夹完整路径拷贝至window环境配置路径中，注意加入的是文件夹哦！")]),t._v(" "),a("li",[t._v("计算机--右击属性--高级系统设置--环境变量--path--编辑--加入末尾即可，注意要在前面加入分号")]),t._v(" "),a("li",[t._v("mongoDB安装的时候默认已经加入windows服务")])]),t._v(" "),a("h2",{attrs:{id:"记录一些在配置云服务器的事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#记录一些在配置云服务器的事项"}},[t._v("#")]),t._v(" 记录一些在配置云服务器的事项")]),t._v(" "),a("blockquote",[a("p",[t._v("SSL证书申请，在腾讯云申请的免费的，还是比较方便的")])]),t._v(" "),a("ul",[a("li",[t._v("申请免费SSL证书时，如果选择自动生成DNS验证时，解析记录会多一条TXT记录，用于验证域名的所有权，也可以选择自己手动添加，SSL证书颁发完成后，可以选择删除这条TXT记录（因为看着比较别扭...）")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/4142#2.E3.80.81.E6.89.8B.E5.8A.A8dns.E9.AA.8C.E8.AF.81",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考链接1"),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/6815",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考链接2"),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://cloud.tencent.com/document/product/302/12648",target:"_blank",rel:"noopener noreferrer"}},[t._v("TXT记录链接"),a("OutboundLink")],1)])]),t._v(" "),a("blockquote",[a("p",[t._v("windows文件传输 SSL方式")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://cloud.tencent.com/document/product/213/8042",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考链接"),a("OutboundLink")],1)])]),t._v(" "),a("blockquote",[a("p",[t._v("DNS解析 域名解析")])]),t._v(" "),a("ul",[a("li",[t._v("腾讯云默认提供了")]),t._v(" "),a("li",[t._v("可以添加二级域名，记录值要添加成A")]),t._v(" "),a("li",[t._v("之前SSL申请证书产生的TXT记录可以删除")])]),t._v(" "),a("blockquote",[a("p",[t._v("小程序相关")])]),t._v(" "),a("ul",[a("li",[t._v("自行部署node.js "),a("a",{attrs:{href:"https://cloud.tencent.com/document/product/619/11445",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考链接"),a("OutboundLink")],1)])]),t._v(" "),a("blockquote",[a("p",[t._v("pm2常用命令")])]),t._v(" "),a("ul",[a("li",[t._v('pm2 start app.js --name="api"  指定任务名字为api')]),t._v(" "),a("li",[t._v("pm2 start app.js --watch 文件变化时自动重启 可以和上面任务连写")]),t._v(" "),a("li",[t._v("pm2 list  pm2所有应用程序列表")]),t._v(" "),a("li",[t._v("pm2 show api 显示名为api的应用信息")]),t._v(" "),a("li",[t._v("pm2 reload api 重载指定的应用")]),t._v(" "),a("li",[t._v("pm2 restart api 重启指定的应用")]),t._v(" "),a("li",[t._v("pm2 stop all 停止所有应用程序")]),t._v(" "),a("li",[t._v("pm2 stop 0 停止id为0的应用")])]),t._v(" "),a("blockquote",[a("p",[t._v("使用pm2与git自动更新项目")])]),t._v(" "),a("ul",[a("li",[t._v("需要在server根目录下创建ecosystem.json配置pm2选项")]),t._v(" "),a("li",[t._v("windows cmd命令输入"),a("code",[t._v("NETSTAT -a -n")]),t._v("查看当前被占用的 端口号")])]),t._v(" "),a("blockquote",[a("p",[t._v("windows 安装服务")])]),t._v(" "),a("ul",[a("li",[t._v('sc create 服务名 binPath= "目录\\xxx.exe"')]),t._v(" "),a("li",[t._v("net start xxx")]),t._v(" "),a("li",[t._v("net stop xxx")]),t._v(" "),a("li",[t._v("sc delete xxx")])]),t._v(" "),a("blockquote",[a("p",[t._v("node.js框架搭建https接口")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" https "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" express "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("'express"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./xblcity/2_xblcity.com.key"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cert")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./xblcity/1_xblcity.com_bundle.crt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\nhttps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8090")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 或者")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Koa "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" https "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./config.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 配置的端口")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\nhttps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);