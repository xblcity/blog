(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{430:function(t,s,a){t.exports=a.p+"assets/img/webpack1_1.b3724998.png"},431:function(t,s,a){t.exports=a.p+"assets/img/webpack1_2.8cd8bae2.png"},432:function(t,s){t.exports="data:image/png;base64,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"},433:function(t,s,a){t.exports=a.p+"assets/img/webpack1_4.250ea166.png"},434:function(t,s,a){t.exports=a.p+"assets/img/webpack1_5.caa74f2d.png"},435:function(t,s,a){t.exports=a.p+"assets/img/webpack1_6.d43a8219.png"},436:function(t,s,a){t.exports=a.p+"assets/img/ts2.a406e531.png"},437:function(t,s,a){t.exports=a.p+"assets/img/ts1.75e70ee2.png"},438:function(t,s,a){t.exports=a.p+"assets/img/ts3.a7ffe9b4.png"},439:function(t,s,a){t.exports=a.p+"assets/img/ts4.415205f8.png"},440:function(t,s,a){t.exports=a.p+"assets/img/webpack3_1.d9ad890d.png"},441:function(t,s,a){t.exports=a.p+"assets/img/webpack3_2.73ff9abd.png"},442:function(t,s,a){t.exports=a.p+"assets/img/webpack3_3.6ade0229.png"},443:function(t,s,a){t.exports=a.p+"assets/img/webpack3_4.24193a95.png"},484:function(t,s,a){"use strict";a.r(s);var e=a(35),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"使用-webpack-从零配置-react-开发环境及打包优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-webpack-从零配置-react-开发环境及打包优化"}},[t._v("#")]),t._v(" 使用 webpack 从零配置 React 开发环境及打包优化")]),t._v(" "),e("p",[t._v("使用的 webpack 版本是@4.39.3，不过@5 beta 版已经发布了，emmmm...")]),t._v(" "),e("h2",{attrs:{id:"_1-实现对-jsx-js-png-less-等文件进行打包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-实现对-jsx-js-png-less-等文件进行打包"}},[t._v("#")]),t._v(" 1.实现对 JSX, JS, PNG, LESS 等文件进行打包")]),t._v(" "),e("p",[t._v("目标：将 JSX, LESS 等文件进行打包成 bundle.js，在 HMTL 中引入并可以在浏览器访问")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/xblcity/web-learning/tree/master/webpack-learn/first",target:"_blank",rel:"noopener noreferrer"}},[t._v("源码地址"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"_1-1-初始化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-初始化"}},[t._v("#")]),t._v(" 1.1 初始化")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("新建 first 文件夹")])]),t._v(" "),e("li",[e("p",[t._v("在文件夹中使用"),e("code",[t._v("npm init -y")]),t._v("生成"),e("code",[t._v("package.json")]),t._v("文件")])])]),t._v(" "),e("h3",{attrs:{id:"_1-2-安装-webpack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-安装-webpack"}},[t._v("#")]),t._v(" 1.2 安装 webpack")]),t._v(" "),e("p",[t._v("使用"),e("code",[t._v("npm")]),t._v("或者"),e("code",[t._v("yarn")]),t._v("安装下面依赖，本文全部使用的"),e("code",[t._v("yarn")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("yarn add webpack webpack"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cli "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\n")])])]),e("blockquote",[e("p",[t._v("注释: webpack-cli 是 webpack 的命令行工具 -D 是 --save--dev 的缩写， -S 是 --save 的缩写。版本号：webpack@4.39.3，webpack-cli@3.3.7")])]),t._v(" "),e("h3",{attrs:{id:"_1-3-安装样式相关-loader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-安装样式相关-loader"}},[t._v("#")]),t._v(" 1.3 安装样式相关 loader")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("yarn add css"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("loader style"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("loader less less"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("loader "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\n")])])]),e("blockquote",[e("p",[t._v("注释: css-loader 可以配置 css-module，css-loader 用于处理.css 文件，style-loader 用于把样式插入 dom")])]),t._v(" "),e("h3",{attrs:{id:"_1-4-安装-babel-react-相关-loader-安装-react-相关依赖"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-安装-babel-react-相关-loader-安装-react-相关依赖"}},[t._v("#")]),t._v(" 1.4 安装 babel,react 相关 loader，安装 react 相关依赖")]),t._v(" "),e("p",[t._v("安装 babel")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("yarn add babel"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("loader @babel"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("core @babel"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("preset"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("env "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\n")])])]),e("blockquote",[e("p",[t._v("注释: babel，将 es6 转换为 es5，@babel/core 是 babel-core 的第七版，@babel/preset-env 是 babel-preset-env 升级版，用于配置浏览器的兼容度以及使用最新 ES6 语法。不需要安装 babel-preset-stage-0，因为 preset-env 已经集成了这几个 stage 的功能。但是 preset-env 不支持修饰器，动态引入，静态属性等等 ES6+ 最新的语法")])]),t._v(" "),e("p",[t._v("安装 babel-react")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("yarn add @babel"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("preset"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("react "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\n")])])]),e("blockquote",[e("p",[t._v("注释: @babel/preset-react 是 babel-preset-react 升级版, 用于将 jsx 转换成 js")])]),t._v(" "),e("p",[t._v("安装 react 相关依赖")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("yarn add react react"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("dom "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("S")]),t._v("\n")])])]),e("blockquote",[e("p",[t._v("注释, babel 转换主要使用到的是 React.createElement()方法")])]),t._v(" "),e("h3",{attrs:{id:"_1-5-安装图片处理相关-loader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-安装图片处理相关-loader"}},[t._v("#")]),t._v(" 1.5 安装图片处理相关 loader")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("yarn add url"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("loader file"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("loader "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\n")])])]),e("h3",{attrs:{id:"_1-6-项目目录结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-项目目录结构"}},[t._v("#")]),t._v(" 1.6 项目目录结构")]),t._v(" "),e("p",[t._v("新建配置文件及开发文件")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" dist "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用于存放打包后的文件")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" node_modules "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 依赖包，自动生成")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" webpack"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack配置")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("babelrc "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// babel配置")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" src\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" assets\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" avatar"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("png\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" index"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jsx\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jsx\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("less\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" index"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gitignore "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置git忽略文件")]),t._v("\n")])])]),e("p",[t._v("可以按照这个顺序对文件进行配置与修改 "),e("code",[t._v("src/app.js")]),t._v(" 以及 "),e("code",[t._v("src/app.less")]),t._v(" ---\x3e "),e("code",[t._v("src/index.jsx")]),t._v(" ---\x3e "),e("code",[t._v("webpack.config.js")]),t._v(" ---\x3e "),e("code",[t._v(".babelrc")])]),t._v(" "),e("p",[t._v("贴一下主要文件的内容")]),t._v(" "),e("p",[e("img",{attrs:{src:a(430),alt:"webpack"}})]),t._v(" "),e("p",[e("img",{attrs:{src:a(431),alt:"webpack"}})]),t._v(" "),e("p",[e("img",{attrs:{src:a(432),alt:"webpack"}})]),t._v(" "),e("p",[e("img",{attrs:{src:a(433),alt:"webpack"}})]),t._v(" "),e("p",[e("img",{attrs:{src:a(434),alt:"webpack"}})]),t._v(" "),e("p",[t._v("关于 webpack 的一些配置，可以参考"),e("a",{attrs:{href:"https://github.com/xblcity/blog/blob/master/fe-engineering/webpack.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("上一篇的内容"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"_1-7-踩坑点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-踩坑点"}},[t._v("#")]),t._v(" 1.7 踩坑点")]),t._v(" "),e("ul",[e("li",[t._v("webpack 配置文件需要使用 Common.js 模块规范(因为是 node 可执行文件)，ES6 模块语法无法使用，但是其他文件如 app.js 可以使用 ES6 语法(因为有 babel-loader 可以进行转换)")]),t._v(" "),e("li",[e("code",[t._v("index.tsx")]),t._v("，"),e("code",[t._v("ReactDOM.render(element, document.getElementById('app'))")]),t._v("要与"),e("code",[t._v("HTML")]),t._v("的节点"),e("code",[t._v("id")]),t._v("对应，其次,引入的"),e("code",[t._v("import ReactDOM from 'react-dom'")]),t._v("名字是不做严格区分的")]),t._v(" "),e("li",[t._v("构建完成的 script 文件要放在 id 为 app 的 div 下面")])]),t._v(" "),e("h4",{attrs:{id:"webpack-配置文件容易出错的部分"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-配置文件容易出错的部分"}},[t._v("#")]),t._v(" webpack 配置文件容易出错的部分")]),t._v(" "),e("ul",[e("li",[t._v("webpack 容易写错的部分，output 的是 filename 以及 path，不是 pathname")]),t._v(" "),e("li",[t._v("webpack module rules 里面书写的是 loader 的规则")]),t._v(" "),e("li",[t._v("注意：rules 之下的规则，test 后面跟正则表达式，而不是加引号的字符串")]),t._v(" "),e("li",[t._v("添加 mode，让 webpack 打包时进行相应的优化")])]),t._v(" "),e("h4",{attrs:{id:"与-react-配置有关的注意事项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#与-react-配置有关的注意事项"}},[t._v("#")]),t._v(" 与 react 配置有关的注意事项")]),t._v(" "),e("ul",[e("li",[t._v("如果使用了 babel-loader 处理包含 jsx 语法的 js 文件，最好配置.babelrc(rc 可以解为 resource 缩写)里面的 presets 配置项，preset-react，preset-env 可以配置要兼容浏览器支持语法的程度。当然，.babelrc 也可以配置 plugins 选项，这里并没有用到")])]),t._v(" "),e("h3",{attrs:{id:"_1-8-进行打包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-8-进行打包"}},[t._v("#")]),t._v(" 1.8 进行打包")]),t._v(" "),e("p",[t._v("在"),e("code",[t._v("package.json")]),t._v("文件的"),e("code",[t._v("script")]),t._v("中添加 "),e("code",[t._v("build")]),t._v(" 命令即可。")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"script"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack --config webpack.config.js"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("命令行输入"),e("code",[t._v("yarn build")]),t._v("，可以看到在"),e("code",[t._v("build")]),t._v("目录多出了一个"),e("code",[t._v("bundle.js")]),t._v("文件，把"),e("code",[t._v("src")]),t._v("目录下的"),e("code",[t._v("index.html")]),t._v("在浏览器中打开，就可以看到我们实现的页面了")]),t._v(" "),e("p",[e("img",{attrs:{src:a(435),alt:"打包成功"}})]),t._v(" "),e("h2",{attrs:{id:"_2-配置-ts-以及-dev-环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置-ts-以及-dev-环境"}},[t._v("#")]),t._v(" 2. 配置 ts 以及 dev 环境")]),t._v(" "),e("h3",{attrs:{id:"_2-1-配置-ts-开发环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-配置-ts-开发环境"}},[t._v("#")]),t._v(" 2.1 配置 ts 开发环境")]),t._v(" "),e("p",[t._v("在此之前，我们先配置一下 ts-react 开发环境。")]),t._v(" "),e("p",[t._v("新建目录 second，全局安装"),e("code",[t._v("typescript")]),t._v("，目的是为了能够使用"),e("code",[t._v("tsc")]),t._v("命令")]),t._v(" "),e("p",[t._v("分别执行以下命令")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("npm init "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("y "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生成package.json")]),t._v("\ntsc "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("init "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生成tsconfig.json")]),t._v("\n")])])]),e("p",[t._v("按照上一节的内容安装依赖")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("yarn add webpack webpack"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cli css"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("loader style"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("loader less less"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("loader babel"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("loader @babel"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("core @babel"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("preset"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("env @babel"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("preset"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("react url"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("loader file"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("loader "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\n\nyarn add react react"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("dom "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("S")]),t._v("\n")])])]),e("p",[t._v("安装项目需要的 typescript 相关依赖，以及 react type 库")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("yarn add typescript @babel"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("preset"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("typescript "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\nyarn add @types"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("react"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("dom @types"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("react "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\n")])])]),e("blockquote",[e("p",[t._v("注释：types 依赖包含.d.ts 声明文件，在 react 中用 TS 语法时，会自动对变量进行类型检测")])]),t._v(" "),e("p",[t._v("因为要区分开发环境与正式环境的 webpack 配置，这里我们新建"),e("code",[t._v("base dev prod")]),t._v("等三个文件对 webpack 进行配置")]),t._v(" "),e("p",[t._v("文件目录")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" dist "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用于存放打包后的文件")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" node_modules "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 依赖包，自动生成")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" webpack"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("base"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack基础配置")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" webpack"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dev"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack开发环境配置")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" webpack"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prod"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack正式环境配置")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("babelrc "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// babel配置")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" src\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" assets\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" avatar"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("png\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" index"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tsx\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tsx\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("less\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" index"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" tsconfig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gitignore "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置git忽略文件")]),t._v("\n")])])]),e("p",[t._v("当我们按照上一节的内容把"),e("code",[t._v("index.tsx app.tsx app.less")]),t._v("几个文件写好后，发现多处报红，我们需要把"),e("code",[t._v("tsconfig.json")]),t._v("文件的"),e("code",[t._v("jsx")]),t._v("选项的值改成"),e("code",[t._v("react")]),t._v("并取消注释。")]),t._v(" "),e("p",[e("img",{attrs:{src:a(436),alt:"ts"}})]),t._v(" "),e("p",[t._v("关于 JSX 部分的代码不报红了，但是引入的 less 文件，png 文件报红了，为什么呢？是因为 TS 没有找到这两个文件对应的"),e("code",[t._v(".d.ts")]),t._v("声明文件，那应该如何解决？")]),t._v(" "),e("p",[e("img",{attrs:{src:a(437),alt:"ts"}})]),t._v(" "),e("p",[t._v("可以自己写一个"),e("code",[t._v(".d.ts")]),t._v("文件对 png 以及 less 文件进行 intrface 定义，或者是安装依赖包进行自动生成，这里举例第一种方法")]),t._v(" "),e("p",[t._v("src 目录下新建"),e("code",[t._v("globalType.d.ts")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("declare module "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*.less'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" content"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" any\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" content\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\ndeclare module "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*.png'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" content"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" any\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" content\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("这时候就没有红色警告啦~")]),t._v(" "),e("p",[t._v("但是还有一个问题，在"),e("code",[t._v("index.tsx")]),t._v("中，引入的"),e("code",[t._v("app.tsx")]),t._v("报红，但是把"),e("code",[t._v(".tsx")]),t._v("去掉"),e("code",[t._v("webpack")]),t._v("会找不到"),e("code",[t._v("app")]),t._v("文件而打包失败，这时候我们需要配置"),e("code",[t._v("webpack")]),t._v("的"),e("code",[t._v("resolve")]),t._v("配置项")]),t._v(" "),e("p",[e("img",{attrs:{src:a(438),alt:"ts"}})]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("resolve"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 省略文件后缀，让webpack自动查找")]),t._v("\n  extensions"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.js'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.jsx'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.ts'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.tsx'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),e("p",[t._v("好了，页面终于没警告了~")]),t._v(" "),e("p",[t._v("紧接着配置"),e("code",[t._v(".babelrc")]),t._v("，其实主要就是多添加一个"),e("code",[t._v("@babel/preset-typescript")]),t._v(" 的 "),e("code",[t._v("presets")])]),t._v(" "),e("p",[t._v("配置 webpack，安装依赖")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("yarn add webpack"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("merge "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 该依赖可以合并webpack配置")]),t._v("\n")])])]),e("p",[t._v("紧接着配置"),e("code",[t._v("webpack.config.base.js")]),t._v("以及"),e("code",[t._v("webpack.config.dev.js")]),t._v("，详细见"),e("a",{attrs:{href:"https://github.com/xblcity/web-learning/tree/master/webpack-learn/second",target:"_blank",rel:"noopener noreferrer"}},[t._v("源码"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("最后在"),e("code",[t._v("package.json")]),t._v("文件添加"),e("code",[t._v("build")]),t._v("命令"),e("code",[t._v('"build": "webpack --config webpack.config.prod.js"')]),t._v("并执行")]),t._v(" "),e("p",[e("img",{attrs:{src:a(439),alt:"ts"}})]),t._v(" "),e("p",[t._v("显示打包文件过大，因为"),e("code",[t._v("less png")]),t._v("等文件也被打包成 js 文件了，这里暂时先放着，后面会进行优化")]),t._v(" "),e("p",[t._v("在"),e("code",[t._v("index.html")]),t._v("中引入"),e("code",[t._v("bundle.js")]),t._v(",在浏览器打开，发现加载成功")]),t._v(" "),e("h3",{attrs:{id:"_2-2-配置-dev-环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-配置-dev-环境"}},[t._v("#")]),t._v(" 2.2 配置 dev 环境")]),t._v(" "),e("p",[t._v("如果每次改变一个文件，都要输入打包命令再去浏览器里面查看应用，开发会变得很麻烦，在开发环境下，我们可以使用基于 express 的 webpack 提供 webpack-dev-server，帮助我们更好的在开发环境中开发。")]),t._v(" "),e("p",[t._v("在此之前，我们需要安装两个插件，做到动态生成 "),e("code",[t._v("bundle")]),t._v(" 以及 "),e("code",[t._v("index.html")]),t._v(" 文件")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("yarn add html"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("webpack"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("plugin clean"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("webpack"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("plugin "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 每次生成新的html以及清理html")]),t._v("\nyarn add webpack"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("dev"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("server "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// devServer服务")]),t._v("\n")])])]),e("p",[t._v("把"),e("code",[t._v("src/index.html")]),t._v(" "),e("code",[t._v('<script src="../dist/bundle.js"><\/script>')]),t._v("这行代码删除掉，因为配置了"),e("code",[t._v("html-webpack-plugin")]),t._v("会自动引入打包后的包")]),t._v(" "),e("p",[t._v("配置"),e("code",[t._v("webpack.config.base.js")]),t._v("文件，配置输出文件名字，使得生成的包每次生成的名字都不一样，防止浏览器缓存")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack.config.base.js")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" HtmlWebpackPlugin "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'html-webpack-plugin'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" CleanWebpackPlugin "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'clean-webpack-plugin'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 入口")]),t._v("\n  entry"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    App"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.tsx'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打包后的动态文件及目录")]),t._v("\n  output"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./dist'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    filename"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[chunkhash:4][name]bundle.js'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  plugins"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HtmlWebpackPlugin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      template"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.html'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      filename"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.html'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//打包后的文件名")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CleanWebpackPlugin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//webpack.config.dev.js")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" merge "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack-merge'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" baseWebpackConfig "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./webpack.config.base.js'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("merge")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("baseWebpackConfig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  mode"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'development'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  devServer"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    contentBase"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./dist'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 根目录")]),t._v("\n    open"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    port"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3000'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//默认是8080")]),t._v("\n    stats"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'errors-only'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//终端仅打印 error")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("在"),e("code",[t._v("package.json")]),t._v("文件添加"),e("code",[t._v("dev")]),t._v("命令"),e("code",[t._v("dev")]),t._v("并运行")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"script"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dev"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack-dev-server --config webpack.config.dev.js"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack --config webpack.config.prod.js"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("执行"),e("code",[t._v("yarn dev")])]),t._v(" "),e("p",[t._v("浏览器自动打开"),e("code",[t._v("http://localhost:3000")]),t._v("即项目 html，当我们修改"),e("code",[t._v("app.tsx")]),t._v("文件时，浏览器会自动刷新。")]),t._v(" "),e("p",[t._v("在 dev 模式下，我们在"),e("code",[t._v("dist")]),t._v("目录下是看不到任何文件的，因为 dev 把这些文件存放在内存中了")]),t._v(" "),e("p",[t._v("执行"),e("code",[t._v("yarn build")]),t._v("进行打包，发现打包出的"),e("code",[t._v("app.js")]),t._v("有"),e("code",[t._v("343K")]),t._v("，webpack提出了警告，后面一小节会来说这个问题")]),t._v(" "),e("h3",{attrs:{id:"_2-3-优化-react-ts-使用体验"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-优化-react-ts-使用体验"}},[t._v("#")]),t._v(" 2.3 优化 react-ts 使用体验")]),t._v(" "),e("ul",[e("li",[t._v("使用 babel 支持较新的语法")]),t._v(" "),e("li",[t._v("在 tsx 中使用 class 组件，使用函数组件")]),t._v(" "),e("li",[t._v("在 tsx 中使用 antd")])]),t._v(" "),e("h4",{attrs:{id:"_2-3-1-使用较新的语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-1-使用较新的语法"}},[t._v("#")]),t._v(" 2.3.1 使用较新的语法")]),t._v(" "),e("p",[t._v("在 class 组件中，我们可能会用到这些比较新的语法(以下用的 js 语法)")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://babeljs.io/docs/en/plugins",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel 的插件"),e("OutboundLink")],1),e("br"),t._v(" "),e("a",{attrs:{href:"https://babeljs.io/docs/en/v7-migration",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel7 的插件包"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @babel/plugin-proposal-decorators")]),t._v("\n@"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Demo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @babel/plugin-proposal-class-properties")]),t._v("\n  a "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 此特性需要安装 babel-plugin-transform-class-properties")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// babel7的包名是 @babel/plugin-proposal-class-properties")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleTest")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("12312")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("配置 "),e("code",[t._v(".babelrc")]),t._v("，需要哪些你就可以装哪些，这里我只是用"),e("code",[t._v("@babel/plugin-proposal-class-properties")]),t._v("做一下演示")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"presets"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("..."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"plugins"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/plugin-proposal-class-properties"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h4",{attrs:{id:"_2-3-2-在-react-中使用-ts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-2-在-react-中使用-ts"}},[t._v("#")]),t._v(" 2.3.2 在 React 中使用 TS")]),t._v(" "),e("p",[t._v("可以去看"),e("a",{attrs:{href:"https://github.com/xblcity/web-learning/tree/master/webpack-learn/second/src",target:"_blank",rel:"noopener noreferrer"}},[t._v("源码"),e("OutboundLink")],1),t._v("或者"),e("a",{attrs:{href:"https://github.com/xblcity/blog/blob/master/react/react-ts.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("前面的这篇文章"),e("OutboundLink")],1)]),t._v(" "),e("h4",{attrs:{id:"_2-3-3-在-react-中使用-ant-design"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-3-在-react-中使用-ant-design"}},[t._v("#")]),t._v(" 2.3.3 在 React 中使用 ant-design")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("yarn add antd "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("S")]),t._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 不需要安装type库")]),t._v("\n")])])]),e("p",[t._v("但是当我们引入"),e("code",[t._v("Input Button")]),t._v("组件时，发现样式并没有生效，当我们在app.jsx引入"),e("code",[t._v("import 'antd/dist/antd.css'")]),t._v("发现报错了，因为webpack默认只处理"),e("code",[t._v("src")]),t._v("目录下的"),e("code",[t._v("less")]),t._v("文件，我们需要把"),e("code",[t._v("include")]),t._v("包含"),e("code",[t._v("node_modules")]),t._v("，更改配置后发现不报错了，但是还是没有样式效果")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" srcRoot "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" modules "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node_modules'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodules"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  rules"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      test"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token regex"}},[e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.(css|less)$")]),e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      include"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("modules"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" srcRoot"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// less-loader要配置 javascriptEnabled: true  开启JS编译")]),t._v("\n")])])]),e("p",[t._v("打包之后发现包竟然变到了"),e("code",[t._v("1.75M")]),t._v("...这个CSS有点太大了吧。。而且还没加载成功。。_")]),t._v(" "),e("p",[t._v("antd已经支持动态引入，tree-shaking了，所以说不用再配置"),e("code",[t._v("babel-plugin-import")])]),t._v(" "),e("blockquote",[e("p",[t._v("https://ant.design/docs/react/introduce-cn\n注意：antd 默认支持基于 ES module 的 tree shaking，不使用以下插件也会有按需加载的效果。")])]),t._v(" "),e("p",[t._v("进行打包"),e("code",[t._v("yarn build")]),t._v("，我们发现包的大小从 "),e("code",[t._v("343K")]),t._v(" 到了 "),e("code",[t._v("477K")]),t._v(" 而我们仅仅引入了两个组件"),e("code",[t._v("Input Button")]),t._v("，如果再增加"),e("code",[t._v("Rate")]),t._v("组件，会变到"),e("code",[t._v("544K")]),t._v(" ... 不过要是把antd分离出来，就不是很大。看下面一节")]),t._v(" "),e("h2",{attrs:{id:"_3-优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-优化"}},[t._v("#")]),t._v(" 3.优化")]),t._v(" "),e("blockquote",[e("p",[t._v("loader 用于帮我们处理不同类型的文件，plugins 用于在打包过程中做优化，在使用它们的时候，我们可以思考一下为什么出现了这些 loader 以及 plugin，它们解决了前端的哪些问题")])]),t._v(" "),e("p",[t._v("开发环境和生产环境的优化可以分离开来")]),t._v(" "),e("p",[t._v("我们先按照上一节的内容安装依赖并配置，"),e("a",{attrs:{href:"https://github.com/xblcity/web-learning/tree/master/webpack-learn/third",target:"_blank",rel:"noopener noreferrer"}},[t._v("源码"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("npm init -y\n\ntsc --init\n\nyarn add webpack webpack-cli css-loader style-loader less less-loader babel-loader @babel/core @babel/preset-env @babel/preset-react url-loader file-loader -D\n\nyarn add react react-dom -S\nyarn add @types/react-dom @types/react -D\n\nyarn add typescript @babel/preset-typescript -D\n\nyarn add antd -S \n\nyarn add webpack-dev-server -D \n\nyarn add html-webpack-plugin clean-webpack-plugin -D\n\nyarn add cross-env -D // 设置环境变量\n")])])]),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" dist "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用于存放打包后的文件")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" node_modules "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 依赖包，自动生成")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" build\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" template\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" index"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" webpack"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("babelrc "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// babel配置")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" src\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" assets\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" avatar"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("png\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" components\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" types "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 存放声明文件")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" index"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tsx\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tsx\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("less\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" tsconfig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gitignore "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置git忽略文件")]),t._v("\n")])])]),e("p",[t._v("编辑"),e("code",[t._v("tsconfig.json")]),t._v("，比如配置react,路径别名等")]),t._v(" "),e("p",[t._v("编辑 "),e("code",[t._v("src")]),t._v(" 下文件，todoList以及antd等等")]),t._v(" "),e("p",[t._v("编辑"),e("code",[t._v("package.json")]),t._v("，添加dev以及build命令")]),t._v(" "),e("p",[t._v("编辑build下文件，比如"),e("code",[t._v("webpack.config.json")]),t._v("和对应的rules，以及plugins")]),t._v(" "),e("p",[t._v("跟上面一节的内容大致相同，我们在此基础上进行优化，")]),t._v(" "),e("h4",{attrs:{id:"查看依赖"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看依赖"}},[t._v("#")]),t._v(" 查看依赖")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("yarn add webpack"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("bundle"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("analyzer "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\n")])])]),e("blockquote",[e("p",[t._v("安装依赖并在plugin中配置，用于查看依赖包大小")])]),t._v(" "),e("h4",{attrs:{id:"css文件优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#css文件优化"}},[t._v("#")]),t._v(" css文件优化")]),t._v(" "),e("p",[t._v("首先把CSS文件分离出来")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("yarn add mini"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("css"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("extract"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("plugin "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\n")])])]),e("blockquote",[e("p",[t._v("分别配置loader以及plugin，这里不做赘述")])]),t._v(" "),e("h4",{attrs:{id:"babel-loader打包速度优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#babel-loader打包速度优化"}},[t._v("#")]),t._v(" babel-loader打包速度优化")]),t._v(" "),e("p",[t._v("bebel-loader设置缓存")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("use"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'babel-loader?cacheDirectory=true'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),e("h3",{attrs:{id:"针对包的大小进行优化实践"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#针对包的大小进行优化实践"}},[t._v("#")]),t._v(" 针对包的大小进行优化实践")]),t._v(" "),e("p",[t._v("未优化前，DOM加载完毕需要7.5s，这是在GZIP已经开启了的情况下，因为服务器带宽只有1M所以加载比较慢。")]),t._v(" "),e("p",[e("img",{attrs:{src:a(440),alt:"webpack"}})]),t._v(" "),e("p",[t._v("把 antd moment axios 使用 splitChunks 抽离出来(建议用了splitChunks就不要用dellPlugins了)")]),t._v(" "),e("p",[t._v("可以看到之前的common已经被分离出antd与vender两个文件")]),t._v(" "),e("p",[t._v("但是加载时间基本没有变化")]),t._v(" "),e("p",[e("img",{attrs:{src:a(441),alt:"webpack"}})]),t._v(" "),e("p",[t._v("我们可以看到app.js太大了，加载时间太长了，我们使用webpack-plugin-analyzer进行打包分析。")]),t._v(" "),e("p",[e("img",{attrs:{src:a(442),alt:"webpack"}})]),t._v(" "),e("p",[t._v("发现highlight.js和@ant-design的包太大了，antd 只要引用了Icon 其中引用的 @ant-design的包太大了，antd4 icon与 antd是分开的，这里使用antd4优化。")]),t._v(" "),e("p",[t._v("并且Icon图标放到CDN上，封装ICON组件用于图标展示")]),t._v(" "),e("p",[t._v("还有一部分rc-form的包占用也比较大，因为antd4 form没有引用rc-form，所以包的大小")]),t._v(" "),e("p",[t._v("接着我们把react, react-dom, moment, highlightjs这些库全部使用CDN在HTML中引入，并且使用webpack, externals配置全局变量。")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("externals"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  highlight"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hljs'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  moment"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'moment'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  react"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'React'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-dom'")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ReactDOM'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),e("p",[t._v("对首页的图片进行压缩")]),t._v(" "),e("p",[t._v("做完这些优化之后，首页加载只需要2.3秒，效果还是很明显的")]),t._v(" "),e("p",[e("img",{attrs:{src:a(443),alt:"webpack"}})]),t._v(" "),e("h3",{attrs:{id:"其他优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#其他优化"}},[t._v("#")]),t._v(" 其他优化")]),t._v(" "),e("ul",[e("li",[t._v("为-webkit-等 CSS 属性加上前缀 "),e("a",{attrs:{href:"https://www.webpackjs.com/loaders/postcss-loader/",target:"_blank",rel:"noopener noreferrer"}},[t._v("postcss-loader"),e("OutboundLink")],1)])]),t._v(" "),e("h3",{attrs:{id:"_3-43-踩坑"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-43-踩坑"}},[t._v("#")]),t._v(" 3.43 踩坑")]),t._v(" "),e("p",[t._v("二级路由加载路径有问题，比如，页面二级路由为"),e("code",[t._v("admin/add-artilce")]),t._v("，webpack 加载的时候，加载的路径是"),e("code",[t._v("/admin/add-artilce.js")])]),t._v(" "),e("p",[t._v("实际上应该加载的路径是"),e("code",[t._v("/add-article")]),t._v("。在 ouput 设置，"),e("code",[t._v("publicPath: '/'")])]),t._v(" "),e("p",[t._v("单页面应用，部署到nginx，页面刷新404")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("配置nginx\nlocation "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  try_files $uri "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("index"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://www.webpackjs.com/guides/",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack 文档指南"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://webpack.wuhaolin.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("深入浅出 Webpack"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.jianshu.com/p/dd9037db20f5",target:"_blank",rel:"noopener noreferrer"}},[t._v("从零搭建项目"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://juejin.im/post/5e5c65fc6fb9a07cd00d8838",target:"_blank",rel:"noopener noreferrer"}},[t._v("深度解锁 Webpack 系列"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=n.exports}}]);