(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{450:function(t,s,a){t.exports=a.p+"assets/img/card.50400839.jpg"},518:function(t,s,a){"use strict";a.r(s);var r=a(35),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"基础组件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#基础组件"}},[t._v("#")]),t._v(" 基础组件")]),t._v(" "),r("h2",{attrs:{id:"关于react组件的一点思考"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#关于react组件的一点思考"}},[t._v("#")]),t._v(" 关于react组件的一点思考")]),t._v(" "),r("p",[t._v("WHY - HOW - WHAT")]),t._v(" "),r("h3",{attrs:{id:"why"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#why"}},[t._v("#")]),t._v(" WHY")]),t._v(" "),r("p",[t._v("页面设计中，存在很多相似甚至相同的东西，如果复制粘贴，可以完成功能，但是存在以下缺点")]),t._v(" "),r("ul",[r("li",[t._v("重复代码太多，后期维护改动比较繁琐，而且往往修改的是一样的内容")])]),t._v(" "),r("p",[t._v("在React中推荐：对于相同相似功能的模块可以只写一个公用组件，在其他需要用到该组件的地方直接引用，后期改动的工作量会小很多")]),t._v(" "),r("h3",{attrs:{id:"how"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#how"}},[t._v("#")]),t._v(" HOW")]),t._v(" "),r("p",[t._v("如何在react中抽出复用组件？")]),t._v(" "),r("h4",{attrs:{id:"面临的问题1"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#面临的问题1"}},[t._v("#")]),t._v(" 面临的问题1")]),t._v(" "),r("ol",[r("li",[t._v("刚开始的时候，可能有这样一个非常简答的卡片组件，先假设为300px*400px的卡片，如下")])]),t._v(" "),r("p",[r("img",{attrs:{src:a(450),alt:"卡片"}})]),t._v(" "),r("p",[t._v("对于这样的一个卡片，一般不要限制卡片的整体高度(限制后期改会麻烦)，只限制图片，标题，副标题，内容区域的几部分高度即可，其中文字部分要做溢出隐藏的处理。")]),t._v(" "),r("p",[t._v("可能有的页面设计，有副标题，有的没有，这时候抽出一个公用组件来适配两种不同布局，需要在引用组件的时候传递一个参数，比如"),r("code",[t._v("showSubTitle")]),t._v("，为布尔值，然后在Card组件利用三元表达式"),r("code",[t._v("(a?b:c)")]),t._v("或者&&来对副标题部分进行渲染或者不渲染")]),t._v(" "),r("p",[t._v("这时候可能某些页面可能需要"),r("code",[t._v("260px*xxxpx")]),t._v("的卡片，内容也是一样的,只是宽度变小了，如何改造呢？这里可能只需要改变card的宽度(前提是图片，标题等区域的宽度是100%而非固定的px，否则改起来又是一件麻烦事)，这里我们可能会想到，再传一个表示width的参数，比如"),r("code",[t._v("cardWidth")]),t._v("或者传一个style对象，比如"),r("code",[t._v("{width: 260}")])]),t._v(" "),r("p",[t._v("如下")]),t._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引用card")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Card showSubTitle"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" style"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("width"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("260")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Card组件")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Card")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token parameter"}},[r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("showSubTitle"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" style"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div style"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("style"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("img"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("标题"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      showSubTitle "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("副标题"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("内容"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),r("p",[t._v("这时候可能有的内容区域可能只展示两行，然后，需要再给一个contentStyle这个props吗，我们发现这个时候Card组件接收的参数实在是有点多了，如果下次图片高度改了呢？难道再传一个picStyle这个参数吗？这个场景不是很常见，但是还是不要排除部分甲方/UI可能会要求这么做，笔者曾经经历过。。")]),t._v(" "),r("p",[t._v("这个时候你可能已经被传递这么多props搞得要蒙了，因为这不仅使组件复杂化了，还需要改进在Card组件使用的地方修改props(你可能会说没有特殊要求的直接使用defaultProps不就好了吗，这确实会有一些作用)，但是你一联想到，以后可能还会有更多的不同的样式，仅仅只是有细微的差别，传递这么多props不是要疯了吗。")]),t._v(" "),r("p",[t._v("现在该如何改造呢，你可能会想，之前可能应该把这个公用组件分开成几个单用的组件，这样就不会有改造的痛苦了(但这样不就又陷入到复制粘贴的僵局了么。。)")]),t._v(" "),r("p",[t._v("也许可以这样，传递一个参数，Card组件使用switch case语句来返回不同的JSX内容，比如")]),t._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Card组件")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Card")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token parameter"}},[r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'home'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" \n      "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div className"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("styles"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("homeCard"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("img"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("标题"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("内容"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'answer'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" \n      "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div className"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("styles"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("answerCard"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("img"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("标题"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("复标题"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("内容"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),r("p",[t._v("这样可能会比，复制粘贴好很多，因为以后改动的话只需要在同一处改动就好了，并且简化了props，只需要传递一个name就会返回不同形式的JSX内容")]),t._v(" "),r("p",[t._v("那有没有更好的办法呢？")])])}),[],!1,null,null,null);s.default=e.exports}}]);