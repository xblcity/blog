# SSR应用

## 1.相关概念

### 1.1.SSR 是什么

SSR 全称 Server Side Rendering，对应的中文名称是:服务端渲染，也就是将渲染的工作放在服务端进行。这种方式很早就存在，早在 Ajax 出现之前全部都是这种方式，由服务端返回给浏览器完整的 html 内容。

优点：

- 首屏渲染较快
- SEO 友好

缺点：

- 访问量过大服务器会有压力
- 页面频繁跳转刷新对用户体验不好

### 1.2.CSR 是什么

CSR，全称是 Client Side Rendering，也就是客户端渲染。

目前 Web 应用中主流的渲染模式，一般由 Server 端返回初始 HTML 内容，然后再由 JS 去异步加载数据，再完成页面的渲染。

客户端渲染模式中最流行的开发模式当属 SPA（单页应用）

优点：

- 页面之间的跳转不会刷新整个页面，而是局部刷新，体验上有了很大的提升。单页应用中，只有首次进入或者刷新的时候才会请求服务器，只需加载一次 js css 资源，页面的路由维护在客户端，页面间的跳转就是切换相关的组件所以切换速度很快，另外数据渲染都在客户端完成，服务器只需要提供一个返回数据的接口,大大降低了服务器的压力。

缺点：

- 首屏渲染慢，因为需要加载 js css 资源，还需要等待 js 执行完成才能渲染页面，所以首屏渲染会比较慢。
- SEO 不友好

### 1.3.为什么 SSR 比 CSR 快

![ssr](./images/know-ssr/ssr.jpeg)

SSR 会经过一下几个步骤

- 输入网址，浏览器发送请求
- 浏览器接收返回的 HTML 并呈现在页面上
- 下载 JS 文件，给元素绑定事件
- 完整的页面渲染完毕

![csr](./images/know-ssr/csr.jpeg)

CSR 会经过一下几个步骤

- 输入网址，浏览器发送请求
- 浏览器接收返回的 JS、CSS 文件，并进行渲染，此时页面是白屏
- 页面渲染完毕，并给元素绑定事件
- 完整的页面渲染完毕

在网路请求中，可以直观的看到返回的 doc 的差别，SSR 返回的是完整的 HTML，而 CSR 返回的是一个空的 HTML，这也是为什么 SSR 比 CSR 快的原因。

![ssr-doc](./images/know-ssr/ssr-doc.png)

![csr-doc](./images/know-ssr/csr-doc.png)

SSR 对于性能指标也有所帮助，会降低 LCP(最大内容绘制)，而且由于设置了图片等元素的宽高，会显著降低 CLS(累计布局偏移)。

![web-vitals](./images/know-ssr/web-vitals.png)
